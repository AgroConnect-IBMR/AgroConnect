<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AgroConecta ‚Äì Plataforma Sustent√°vel</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Leaflet MAP API -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Animations (opcional) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

</head>

<body class="bg-green-50 text-gray-800 font-sans">

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-green-700 shadow-md">
    <div class="container-fluid">
      <a class="navbar-brand text-xl font-bold">AgroConecta</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto gap-3">
          <li class="nav-item">
            <a class="nav-link" href="login.html">Entrar</a>
          </li>
          <li class="nav-item">
            <a class="btn btn-light text-green-700 fw-semibold px-3 py-1 rounded-pill"
              href="cadastro.html">Cadastrar</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <section class="text-center py-16 bg-gradient-to-b from-green-600 to-green-400 text-white">
    <h2 class="text-4xl font-bold mb-3">Conectando o campo √† cidade</h2>
    <p class="text-lg mb-4">Ajudando produtores, consumidores e institui√ß√µes a crescer juntos.</p>

    <a href="cadastro.html" class="btn btn-light text-green-700 fw-bold px-4 py-2 rounded-pill shadow
               animate__animated animate__pulse animate__infinite">
      Conhe√ßa a plataforma
    </a>
  </section>

  <!-- CARDS PRINCIPAIS -->
  <section class="container my-5">
    <div class="row g-4">

      <div class="col-md-4">
        <div class="card p-4 text-center shadow hover:shadow-lg transition">
          <div class="text-5xl mb-3">üë®‚Äçüåæ</div>
          <h5 class="fw-bold mb-2">Cadastre-se como Produtor</h5>
          <p>Mostre seus produtos e alcance novos consumidores e institui√ß√µes.</p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card p-4 text-center shadow hover:shadow-lg transition">
          <div class="text-5xl mb-3">üõí</div>
          <h5 class="fw-bold mb-2">Compre direto do campo</h5>
          <p>Encontre alimentos frescos e apoie a agricultura sustent√°vel.</p>
        </div>
      </div>

      <div class="col-md-4">
        <div class="card p-4 text-center shadow hover:shadow-lg transition">
          <div class="text-5xl mb-3">‚ù§Ô∏è</div>
          <h5 class="fw-bold mb-2">Doe alimentos e ajude</h5>
          <p>Contribua com ONGs e projetos sociais que combatem a fome.</p>
        </div>
      </div>

    </div>
  </section>

  <!-- MAPA INTERATIVO -->
  <section class="bg-white py-5 text-center">
    <h2 class="text-3xl font-bold mb-4">üó∫Ô∏è Pontos de Coleta e Venda</h2>
    <div class="container">
      <div id="map" class="rounded-2xl shadow mx-auto" style="height: 350px; max-width: 750px;"></div>
    </div>
  </section>

  <!-- DOA√á√ïES -->
  <div id="msgDoacao" class="alert alert-success w-75 mx-auto fw-bold" 
     style="display: none; max-width: 700px;">
  ‚úÖ Doa√ß√£o enviada com sucesso! Obrigado por contribuir.
</div>

    <h2 class="text-3xl font-bold mb-4">‚ù§Ô∏è √Årea de Doa√ß√µes</h2>

    <form class="container bg-white p-4 rounded-3 shadow" style="max-width: 700px;">
      <div class="row g-3 mb-3">
        <div class="col-md-4">
          <input type="text" placeholder="Produto" class="form-control" />
        </div>
        <div class="col-md-4">
          <input type="text" placeholder="Quantidade" class="form-control" />
        </div>
        <div class="col-md-4">
          <input type="text" placeholder="Local de entrega" class="form-control" />
        </div>
      </div>

    <div class="text-center">
      <button type="button" id="btnDoar" class="btn btn-success px-5 py-2 rounded-pill shadow">
        Enviar Doa√ß√£o
      </button>
    </div>
<script>
  document.getElementById("btnDoar").addEventListener("click", function () {
    const msg = document.getElementById("msgDoacao");

    // Exibe a mensagem
    msg.style.display = "block";

    // Oculta ap√≥s 4 segundos automaticamente
    setTimeout(() => {
      msg.style.display = "none";
    }, 4000);
  });
</script>

    </form>
  </section>

  <!-- SESS√ÉO EDUCATIVA -->
  <section class="py-5 bg-white text-center">
    <h2 class="text-3xl font-bold mb-4">üìö Sess√£o Educativa</h2>

    <div class="container">
      <div class="row g-4">

        <div class="col-md-4">
          <div class="card shadow-sm p-3">
            <h5 class="fw-semibold">Compostagem Dom√©stica</h5>
            <p>Aprenda a transformar restos org√¢nicos em adubo natural.</p>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card shadow-sm p-3">
            <h5 class="fw-semibold">Consumo Consciente</h5>
            <p>Dicas para reduzir o desperd√≠cio e fazer compras sustent√°veis.</p>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card shadow-sm p-3">
            <h5 class="fw-semibold">Agricultura Org√¢nica</h5>
            <p>Entenda os benef√≠cios da produ√ß√£o sem agrot√≥xicos.</p>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-green-700 text-white text-center py-4 mt-4">
    <div class="d-flex gap-4 justify-content-center">
      <a href="sobre.html" class="text-white">Sobre</a>
      <a href="contato.html" class="text-white">Contato</a>
      <a href="termos.html" class="text-white">Termos de Uso</a>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- MAP SCRIPT COM API DIN√ÇMICA -->
  <script>
  // Inicializa o mapa
  var map = L.map('map').setView([-23.55, -46.63], 12);

  // Camada de tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: "¬© OpenStreetMap"
  }).addTo(map);

  // √çcones personalizados
  var coletaIcon = L.icon({
    iconUrl: 'https://cdn-icons-png.flaticon.com/512/684/684908.png',
    iconSize: [32, 32]
  });

  var vendaIcon = L.icon({
    iconUrl: 'https://cdn-icons-png.flaticon.com/512/535/535285.png',
    iconSize: [32, 32]
  });

  // Pontos fixos
  var pontos = [
  // ======== S√ÉO PAULO ========
  {
    tipo: "coleta",
    nome: "Ponto de Coleta Central - SP",
    lat: -23.55052,
    lng: -46.633308,
    descricao: "Recebe frutas, verduras e hortali√ßas."
  },
  {
    tipo: "venda",
    nome: "Feira Org√¢nica Zona Norte - SP",
    lat: -23.48044,
    lng: -46.62014,
    descricao: "Venda direta do produtor."
  },
  {
    tipo: "coleta",
    nome: "ONG Amigos da Terra - SP",
    lat: -23.55581,
    lng: -46.63961,
    descricao: "Coleta alimentos para fam√≠lias carentes."
  },
  {
    tipo: "venda",
    nome: "Feira do Produtor Sul - SP",
    lat: -23.60012,
    lng: -46.64055,
    descricao: "Produtos frescos e org√¢nicos."
  },

  // ======== RIO DE JANEIRO ========
  {
    tipo: "venda",
    nome: "Feira Org√¢nica da Gl√≥ria - RJ",
    lat: -22.92183,
    lng: -43.17495,
    descricao: "Feira de org√¢nicos tradicional aos domingos."
  },
  {
    tipo: "coleta",
    nome: "ONG Mesa Brasil SESC - RJ",
    lat: -22.90065,
    lng: -43.18334,
    descricao: "Recebe doa√ß√µes de alimentos para redistribui√ß√£o."
  },
  {
    tipo: "venda",
    nome: "Feira da Tijuca - RJ",
    lat: -22.92022,
    lng: -43.24296,
    descricao: "Venda direta de produtos agr√≠colas frescos."
  },
  {
    tipo: "coleta",
    nome: "Ponto de Coleta Maracan√£ - RJ",
    lat: -22.91216,
    lng: -43.23016,
    descricao: "Coleta alimentos para projetos comunit√°rios."
  }
];


  // Layers separados por categoria
  var coletaLayer = L.layerGroup();
  var vendaLayer = L.layerGroup();

  // Cria√ß√£o dos marcadores
  pontos.forEach(p => {
    var marker = L.marker([p.lat, p.lng], {
      icon: p.tipo === "coleta" ? coletaIcon : vendaIcon
    }).bindPopup(`<b>${p.nome}</b><br>${p.descricao}<br><i>${p.tipo.toUpperCase()}</i>`);

    if (p.tipo === "coleta") {
      coletaLayer.addLayer(marker);
    } else {
      vendaLayer.addLayer(marker);
    }
  });

  // Exibe ambos por padr√£o
  coletaLayer.addTo(map);
  vendaLayer.addTo(map);

  // ---------------------------------------
  // ‚úÖ FILTROS (BOT√ïES NO MAPA)
  // ---------------------------------------
  var filtros = L.control({ position: 'topright' });

  filtros.onAdd = function () {
    var div = L.DomUtil.create("div", "card p-2 shadow bg-white");
    div.innerHTML = `
      <div class="fw-bold mb-1">Filtros</div>
      <button id="btnTodos" class="btn btn-success btn-sm w-100 mb-1">Mostrar todos</button>
      <button id="btnColeta" class="btn btn-primary btn-sm w-100 mb-1">S√≥ Coleta</button>
      <button id="btnVenda" class="btn btn-warning btn-sm w-100">S√≥ Venda</button>
    `;
    return div;
  };

  filtros.addTo(map);

  // Eventos dos filtros
  document.getElementById("btnTodos").onclick = function () {
    map.addLayer(coletaLayer);
    map.addLayer(vendaLayer);
  };

  document.getElementById("btnColeta").onclick = function () {
    map.addLayer(coletaLayer);
    map.removeLayer(vendaLayer);
  };

  document.getElementById("btnVenda").onclick = function () {
    map.addLayer(vendaLayer);
    map.removeLayer(coletaLayer);
  };

  // ---------------------------------------
  // ‚úÖ LEGENDA NO CANTO INFERIOR DIREITO
  // ---------------------------------------
  var legenda = L.control({ position: 'bottomright' });

  legenda.onAdd = function () {
    var div = L.DomUtil.create('div', 'card p-2 shadow bg-white');
    div.innerHTML = `
      <div class="fw-bold mb-1">Legenda</div>
      <div><img src="https://cdn-icons-png.flaticon.com/512/684/684908.png" width="20"> Ponto de Coleta</div>
      <div><img src="https://cdn-icons-png.flaticon.com/512/535/535285.png" width="20"> Ponto de Venda</div>
    `;
    return div;
  };

  legenda.addTo(map);

  // ---------------------------------------
  // ‚úÖ BOT√ÉO "USAR MINHA LOCALIZA√á√ÉO"
  // ---------------------------------------
  var botaoGeo = L.control({ position: "topleft" });

  botaoGeo.onAdd = function () {
    var div = L.DomUtil.create("div", "card p-1 bg-white shadow");
    div.innerHTML = `
      <button id="btnGeo" class="btn btn-info btn-sm fw-bold">üìç Minha localiza√ß√£o</button>
    `;
    return div;
  };

  botaoGeo.addTo(map);

  document.getElementById("btnGeo").onclick = function () {
    if (!navigator.geolocation) {
      alert("Geolocaliza√ß√£o n√£o suportada.");
      return;
    }

    navigator.geolocation.getCurrentPosition(
      function (pos) {
        var lat = pos.coords.latitude;
        var lng = pos.coords.longitude;

        L.marker([lat, lng]).addTo(map)
          .bindPopup("Voc√™ est√° aqui!")
          .openPopup();

        map.setView([lat, lng], 15);
      },
      function () {
        alert("N√£o foi poss√≠vel obter sua localiza√ß√£o.");
      }
    );
  };
  </script>
</body>

</html>
